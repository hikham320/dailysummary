## TL;DR
```
Google カレンダーのアクセス用のプロジェクトを作成
デスクトップアプリ用の OAuth クライアント ID を作成し、認証情報ファイル（client_secret_xxxxx.json）を用意
$ ./init
$ ./make help
```

# これなに？
自分の Google カレンダーにある予定を取得し、各タスクに何時間使用したかをまとめてくれる python スクリプト（とシェルファイル）です。
Mac のターミナル等で使用することを想定しています。

# 必要なもの
- python3 のインストール (3.6以上)

# 使い方
git がわかる方はとりあえず clone してください。

`make` （と `init`）が実行可能なシェルファイルになっています。

初回のみ以下の **初期設定** に従って初期化を行います。初期設定が完了したら `./make` で今日の Google カレンダーの予定を表示します。


# 初期設定
使い始める前に、Google Cloud Platform 内にカレンダーへのアクセスが可能なプロジェクトを各自で作成し、認証情報等を取得する必要があります。とても面倒くさいですが、最初の一回だけなので我慢してください...

（既に同じような用途で自分用にプロジェクトを作成している場合、おそらく流用が可能です）

- プロジェクトを作成
- カレンダーAPIの有効化
- OAuth 同意画面を作成
- 認証情報を作成
- `./init` もしくは `./make init` を実行

## プロジェクトを作成
https://console.cloud.google.com/projectcreate にアクセスします。
初めて Google Cloud Platform へアクセスする場合、利用規約への同意等を求められるので適当に同意します。

`プロジェクト名`は何でも問題ありませんが、後で何に使っているか分からなくならないよう、何かしらわかりやすい名前をつけることを**強く**推奨します。 （`Google Calendar Accessor` とか）

`プロジェクト ID` はそのままでもOKです。

`場所` は「組織なし」でOKです。

入力したら`作成`をクリックします。


### ※プロジェクトの選択
プロジェクトを作成したら、画面上部の Google Cloud Platform の横にあるプロジェクト名を確認し、*今作ったプロジェクトがちゃんと選択されているかどうかを確認してください*。（複数プロジェクトがすでに作成されている場合、新しくプロジェクトを作っても自動的にそれにフォーカスしてくれない場合があります）


## カレンダーAPIの有効化
メニュー `≡` から「API とサービス」>「ライブラリ」を選択します。

`API とサービスを検索`のところに `Calendar` などと入力し Enter すると、`Google Calendar API` が出てきますのでそれをクリックし、遷移した先の画面で`有効にする`をクリックします。
有効化されたら画面が遷移しますので、このステップはOKです。


## OAuth 同意画面の作成
メニュー `≡` から「API とサービス」>「OAuth 同意画面」を選択します。

`User Type` の「外部」を選択し、`作成` をクリックして進めます。

#### 1. OAuth 同意画面
必須項目のみの入力で問題ありません。
`アプリ情報 > アプリ名` は何でもOKです。ただし、 `Google` を含んだ名前はエラーが出て使用できないようです。
`アプリ情報 > ユーザー　サポートメール` および `デベロッパーの連絡先情報 > メールアドレス` は自分のメールアドレスを選択、もしくは入力します。
入力したら`保存して次へ`をクリックします。

#### 2. スコープ
特になにもせず`保存して次へ`をクリックします。

#### 3. テストユーザー
`＋ ADD USERS`をクリックし、出てきた画面で自分のメールアドレスを入力して「追加」ボタンをクリックします。

入力したら`保存して次へ`をクリックします。

#### 4. 概要
この画面に遷移したらこのステップはOKです。


## 認証情報の作成
メニュー `≡` から「API とサービス」>「認証情報」を選択します。

上部の`＋ 認証情報を作成`をクリックし、`OAuth クライアント ID` を選択します。

`アプリケーションの種類`から `デスクトップ アプリ`を選択します。`名前`を適当につけて `作成`をクリックします。

モーダルウィンドウが表示されたら、`JSON をダウンロード` ボタンをクリックします。 （IDとシークレットのメモは不要です）このときにダウンロードした `client_secret_ほにゃほにゃ.json` は後で使用します。

ダウンロードせずにモーダルを閉じてしまっても、`OAuth 2.0 クライアント ID` の一覧から右端のダウンロードボタンを押すことでダウンロードできます。

ダウンロードしたらこのステップはOKです。


## init の実行
`init` を実行してください。
`pip3: command not found` などと表示されて実行できない場合、 python3 がインストールされていることを確認してください。

あとはコンソールに出力されたとおりにメールアドレスを入力したり、`client_secret_hogefuga.json` の中身を貼り付けたり、立ち上がったブラウザでアプリの認証などを行っていけば初期設定は完了となります。